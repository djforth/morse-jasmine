(function(global,factory){if('function'==typeof define&&define.amd)define(['module','exports','lodash/reject','lodash/isPlainObject','lodash/forEach','lodash/forIn','lodash/isNull','lodash/isEmpty','lodash/find','lodash/isArray','lodash/isString','lodash/map','lodash/isObject'],factory);else if('undefined'!=typeof exports)factory(module,exports,require('lodash/reject'),require('lodash/isPlainObject'),require('lodash/forEach'),require('lodash/forIn'),require('lodash/isNull'),require('lodash/isEmpty'),require('lodash/find'),require('lodash/isArray'),require('lodash/isString'),require('lodash/map'),require('lodash/isObject'));else{var mod={exports:{}};factory(mod,mod.exports,global.reject,global.isPlainObject,global.forEach,global.forIn,global.isNull,global.isEmpty,global.find,global.isArray,global.isString,global.map,global.isObject),global.spy_manager=mod.exports}})(this,function(module,exports,_reject2,_isPlainObject2,_forEach2,_forIn2,_isNull2,_isEmpty2,_find2,_isArray2,_isString2,_map2,_isObject2){'use strict';function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function addSpy(title){var spy=jasmine.createSpy(title);return{title:title,spy:spy}}function _addReturn(spy,ret){(0,_isObject3.default)(ret)&&ret.function&&ret.value&&spy.and[ret.function](ret.value)}function addSpyObj(title,methods){var keys=(0,_map3.default)(methods,function(m){return(0,_isString3.default)(m)?m:m.title}),spy=jasmine.createSpyObj(title,keys);return{title:title,spy:spy}}function addSpytype(title,opts){return(0,_isArray3.default)(opts)?addSpyObj(title,opts):addSpy(title,opts)}function getItem(list,title){var obj=(0,_find3.default)(list,function(spy){return spy.title===title});return(0,_isEmpty3.default)(obj)?null:obj}function addSpyArray(spies){return(0,_map3.default)(spies,function(m){var title=(0,_isString3.default)(m)?m:m.title,opts=(0,_isString3.default)(m)?null:m.opts;return addSpytype(title,opts)})}function resetSpyObj(obj){(0,_forIn3.default)(obj,function(v){v.calls.reset()})}Object.defineProperty(exports,'__esModule',{value:!0}),exports.default=function(){var spies=[],obj={add:function add(modules){return obj.addSpy(modules)},addSpy:function(modules){if((0,_isArray3.default)(modules))return spies=spies.concat(addSpyArray(modules)),obj;if((0,_isObject3.default)(modules)){var _ref=[modules.title,modules.opts],_title=_ref[0],opts=_ref[1];spies.push(addSpytype(_title,opts))}return(0,_isString3.default)(modules)&&spies.push(addSpytype(modules,null)),obj},addReturn:function addReturn(title,spy_obj){var spy=getItem(spies,title);if((0,_isNull3.default)(spy)){var new_spy=spy_obj?{title:title,opts:[spy_obj]}:title;obj.addSpy(new_spy),spy=getItem(spies,title)}return spy=spy.spy,spy_obj&&(spy=spy[spy_obj]),function(type,val){_addReturn(spy,{function:type,value:val})}},returnObj:function returnObj(title){var spy=getItem(spies,title).spy;return function(opts){(0,_forEach3.default)(opts,function(opt){spy[opt.title].and[opt.func](opt.value)})}},getSpy:function getSpy(title){var obj=getItem(spies,title);return(0,_isNull3.default)(obj)?null:obj.spy},get:function get(title){return obj.getSpy(title)},removeAll:function removeAll(){return(0,_forEach3.default)(spies,function(s){(0,_isPlainObject3.default)(s.spy)?resetSpyObj(s.spy):s.spy.calls.reset()}),spies=[],obj},removeSpy:function removeSpy(title){return spies=(0,_reject3.default)(spies,function(s){return s.title===title&&((0,_isPlainObject3.default)(s.spy)?resetSpyObj(s.spy):s.spy.calls.reset(),!0)}),obj}};return obj};var _reject3=_interopRequireDefault(_reject2),_isPlainObject3=_interopRequireDefault(_isPlainObject2),_forEach3=_interopRequireDefault(_forEach2),_forIn3=_interopRequireDefault(_forIn2),_isNull3=_interopRequireDefault(_isNull2),_isEmpty3=_interopRequireDefault(_isEmpty2),_find3=_interopRequireDefault(_find2),_isArray3=_interopRequireDefault(_isArray2),_isString3=_interopRequireDefault(_isString2),_map3=_interopRequireDefault(_map2),_isObject3=_interopRequireDefault(_isObject2);module.exports=exports['default']});